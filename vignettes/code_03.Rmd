---
title: "R code in Chapter 3"
author: "Andy P. Field"
date: 'Last updated `r format(Sys.Date(), "%d %B %Y")`'
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{R code in Chapter 3}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  warning = FALSE,
  message = FALSE
)
```

```{r setup}
library(gmodels)
library(tidyverse)
```

## Usage

This file contains code relevant to chapter 1 of *Discovering Statistics Using R and RStudio* by [Andy Field](https://www.discoveringstatistics.com/). These files contain abridged sections from the book so there are some copyright considerations but I offer them under a [Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License](http://creativecommons.org/licenses/by-nc-nd/4.0/), ^[Basically you can use this material for teaching and non-profit activities but do not meddle with it or claim it as your own work.]

## Confidence intervals

```{r}

fb_tib <- tibble::tibble(.rows = 11) %>% 
  dplyr::mutate(
    friends = c(57, 40, 103, 234, 93, 53, 116, 98, 108, 121, 22)
  )

gmodels::ci(fb_tib$friends, confidence = 0.95, na.rm = FALSE)
gmodels::ci(fb_tib$friends)

```

Something other than a 95% interval:

```{r}
gmodels::ci(fb_tib$friends, confidence = 0.90)
```

Access individual values by appending their label in square brackets to the function. Executing this gives us the lopwer boundary of the 95% confidence interval:

```{r}

gmodels::ci(fb_tib$friends)['CI lower']
```

Use extracted value to create tables of summary statistics:

```{r}
# Tidyverse sumptuousness:

fb_tib %>%
  dplyr::summarize(
    mean =  gmodels::ci(friends)['Estimate'],
    `95% CI Lower` = gmodels::ci(friends)['CI lower'],
    `95% CI Upper` = gmodels::ci(friends)['CI upper'],
    ) %>% 
  round(., 2)
```
You can also combine these with opther functions to get summary statistics:

```{r}
fb_tib %>%
  dplyr::summarize(
    Mean =  gmodels::ci(friends)['Estimate'],
    `95% CI Lower` = gmodels::ci(friends)['CI lower'],
    `95% CI Upper` = gmodels::ci(friends)['CI upper'],
    IQR = IQR(friends),
    `Std. dev.` = sd(friends)
    ) %>% 
  round(., 2)

```


